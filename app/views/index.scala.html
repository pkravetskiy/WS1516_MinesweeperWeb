@(message: String, controller:de.htwg.se.controller.IController)

@main("Minesweeper") {
  <script language="JavaScript">

  </script>
  <script language="JavaScript">
    function sendClick(row,column) {
      if (row < 10 && column < 10) {
        $.post("/json/0" + row + "-0" + column);
      } else if (row < 10 && column >= 10) {
        $.post("/json/0" + row + "-" + column);
      } else if (row >= 10 && column < 10) {
        $.post("/json/" + row + "-0" + column);
      } else {
        $.post("/json/" + row + "-" + column);
      }
      // updateField();
    }
    function updateField() {
      var i;
      var j;
      var value;
      for (i = 1; i <= @controller.getPlayingField().getLines(); i++) {
        for (j = 1; j <= @controller.getPlayingField().getLines(); j++) {
          document.getElementById(i + "-" + j).innerHTML = value;
        }
      }
    }
  </script>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="/"><img alt="Brand" height="20" width="20" src="@routes.Assets.at("images/minesweepericon.png")"></a>
        <a class="navbar-brand" href="/">Minesweeper</a>
      </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">New Game<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/command/cell?cell=n">Restart</a></li>
            <li><a href="/command/cell?cell=sS">Small</a></li>
            <li><a href="/command/cell?cell=sM">Medium</a></li>
            <li><a href="/command/cell?cell=sL">Large</a></li>
          </ul>
        </li>
        <li><a href="/command/cell?cell=u">Undo</a></li>
        <li><a href="/command/cell?cell=r">Redo</a></li>
        <li><a href="/about">About</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
  </nav>


  <center>
    <h1>&nbsp;&nbsp;Minesweeper</h1>
    <ul id="qwerty" style="list-style-type:none">
        @if(controller.isGameOver()) {<script>alert('Game Over!')</script>}
        @if(controller.isVictory()) {<script>alert('Victory!')</script>}

    @for(line <- 1 until controller.getPlayingField.getLines + 1){
      <li>
      @for(col <- 1 until controller.getPlayingField.getColumns + 1){
        <span class="Span">
          <a href="/" onclick="sendClick(@line, @col)"
          @if(controller.getPlayingField.getCell(line, col).isRevealed) {
              class="key not_active"
          } else {
            class="key"
          }>
            <span class="Span" id="@line-@col">
              @if(!controller.getPlayingField.getCell(line, col).isRevealed) {
                  &nbsp;
              } else {
                @if(controller.getPlayingField.getCell(line, col).getValue() == 0) {
                    &nbsp;
                } else {
                  @if(controller.getPlayingField.getCell(line, col).getValue() == -1) {
                    <img class="Mine" align="middle" height="27" width="27" src="@routes.Assets.at("images/minesweepericon.png")">
                  } else {
                    @controller.getPlayingField.getCell(line, col).getValue()
                  }
                }
              }
            </span>
          </a>
        </span>
      }
      </li>
    }
    </ul>
  <p>
    &nbsp;&nbsp;@message
  </p>
</center>
  <nav class="navbar navbar-default navbar-fixed-bottom">
  <div class="container">
    <ul class="nav navbar-nav navbar-right">
      <li><a href="/license" >License</a></li>
      <li><a target="_blank" href="https://github.com/pkravetskiy/WS1516_MinesweeperWeb">Github</a></li>
      <li><a href="/authors">Authors</a></li>
    </ul>
  </div>
</nav>
}
